{% extends base_template %}
{% load rg_tags bootstrap_pagination %}


{% block title %}
Search
{% endblock %}


{% block container %}
<div class="basePage">
<div class="row">
  
  <div class="col-xs-12">
  <form action="{{ this_url }}" method="get">

    
    <div class="input-group searchArea">
      <span class="input-group-addon"><i class="fa fa-search" aria-hidden="true"></i></span>
      <input id="id_query" name="fulltext" type="text" class="form-control" aria-label="" placeholder="Search..." value="{% if search_form.fulltext.value %}{{ search_form.fulltext.value }}{% endif %}" />
      <button type="submit" class="input-group-addon button" id="basic-addon21">Search</button>
    </div>
    
    {% if page.object_list %}

    <div id="filters">
      {% for key,vals in filters %}
      <strong>{{ key }}</strong>: {{ vals }}{% if not forloop.last %};{% endif %}
      {% endfor %}
    </div><!-- #params -->

    <div class="resultInfo">
      <h3>
        {{ paginator.count }} search results for "{{ search_form.fulltext.value }}"
      </h3>
    </div>
    
    <div class="accordionCommon hello" id="filtersArea">
      <div class="panel-group" id="articleAccordian">
        <!-- begin searchResultsFilters -->
        <div class="panel panel-default">
          <a class="panel-heading accordion-toggle bg-color-2" data-toggle="collapse"  href="#collapse-filters">
            <span><i class="fa fa-filter"></i> Search filters</span>
            <span class="iconBlock"><i class="fa fa-chevron-down"></i></span>
          </a>
          <!-- collapsed by default: class="panel-collapse collapse in" to expand by default -->
          <div id="collapse-filters" class="panel-collapse collapse">
            <div class="panel-body">
              
              <div class="searchResultsFilters form-group">

                {% if "rg_rgmediatype" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_rgmediatype.icon }}"></i>
                    {{ search_form.rg_rgmediatype.label }}
                  </strong><br/>
                  {{ search_form.rg_rgmediatype }}
                </div>
                {% endif %}

                {% if "rg_interestlevel" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_interestlevel.icon }}"></i>
                    {{ search_form.rg_interestlevel.label }}
                  </strong><br/>
                  {{ search_form.rg_interestlevel }}
                </div>
                {% endif %}

                {% if "rg_readinglevel" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_readinglevel.icon }}"></i>
                    {{ search_form.rg_readinglevel.label }}
                  </strong><br/>
                  {{ search_form.rg_readinglevel }}
                </div>
                {% endif %}

                {% if "rg_genre" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_genre.icon }}"></i>
                    {{ search_form.rg_genre.label }}
                  </strong><br/>
                  {{ search_form.rg_genre }}
                </div>
                {% endif %}

                {% if "rg_theme" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_theme.icon }}"></i>
                    {{ search_form.rg_theme.label }}
                  </strong><br/>
                  {{ search_form.rg_theme }}
                </div>
                {% endif %}

                {% if "rg_chronology" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_chronology.icon }}"></i>
                    {{ search_form.rg_chronology.label }}
                  </strong><br/>
                  {{ search_form.rg_chronology }}
                </div>
                {% endif %}

                {% if "rg_geography" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_geography.icon }}"></i>
                    {{ search_form.rg_geography.label }}
                  </strong><br/>
                  {{ search_form.rg_geography }}
                </div>
                {% endif %}

                {% if "rg_availability" in filters_active %}
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_availability.icon }}"></i>
                    {{ search_form.rg_availability.label }}
                  </strong><br/>
                  {{ search_form.rg_availability }}
                </div>
                {% endif %}

<!--
                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_hasteachingaids.icon }}"></i>
                    {{ search_form.rg_hasteachingaids.label }}
                  </strong><br/>
                  {{ search_form.rg_hasteachingaids }}
                </div>

                <div class="col-sm-6">
                  <strong><i class="fa {{ fields.rg_freewebversion.icon }}"></i>
                    {{ search_form.rg_freewebversion.label }}
                  </strong><br/>
                  {{ search_form.rg_freewebversion }}
                </div>
-->
              </div><!--  .searchResultsFilters .form-group -->
            </div><!--  .panel-body -->
          </div><!--  #collapse-filters .panel-collapse .collapse in -->
        </div><!--  .panel .panel-default -->
      </div><!--  .panel-group #articleAccordian -->
    </div><!--  .accordionCommon .hello #filtersArea -->


  </form>
    
{% if paginator.num_pages > 1 %}
<div class="searchPaginator">
{% bootstrap_paginate page range=10 show_first_last="true" %}
</div>
{% endif %}

{% for object in page.object_list %}
{% article object %}
{% endfor %}

{% if paginator.num_pages > 1 %}
<div class="searchPaginator">
{% bootstrap_paginate page range=10 show_first_last="true" %}
</div>
{% endif %}

{% endif %}{# page.object_list #}

<!-- --------------------------------------------------------------- -->

<div id="querymeta">

{% if terms %}
  <div class="terms">
    <b>Terms</b>

    <strong><a href="{% url "ui-browse-facet" terms.field %}">{{ terms.field }}</a>:</strong>
    {{ terms.term }}

  </div>
{% endif %}

</div><!-- .querymeta -->

{{ query_json|safe }}

</div><!-- .col -->
</div><!-- .row -->
</div>
{% endblock container %}
